
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>grpc_rest · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="events.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    hermit matrix network
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../节点搭建/README.md">
            
                <span>
            
                    
                    节点搭建
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../节点搭建/环境搭建.html">
            
                <a href="../节点搭建/环境搭建.html">
            
                    
                    环境搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../节点搭建/引导节点搭建.html">
            
                <a href="../节点搭建/引导节点搭建.html">
            
                    
                    引导节点搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../节点搭建/全节点搭建.html">
            
                <a href="../节点搭建/全节点搭建.html">
            
                    
                    全节点搭建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../配置解析/README.md">
            
                <span>
            
                    
                    配置解析
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../配置解析/app配置解析.html">
            
                <a href="../配置解析/app配置解析.html">
            
                    
                    app配置解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../配置解析/config配置解析.html">
            
                <a href="../配置解析/config配置解析.html">
            
                    
                    config配置解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../配置解析/client配置解析.html">
            
                <a href="../配置解析/client配置解析.html">
            
                    
                    client配置解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../配置解析/genesis配置解析.html">
            
                <a href="../配置解析/genesis配置解析.html">
            
                    
                    genesis配置解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../验证人/README.md">
            
                <span>
            
                    
                    验证人
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../验证人/验证器操作指南.html">
            
                <a href="../验证人/验证器操作指南.html">
            
                    
                    验证器操作指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../验证人/验证器常见的问题.html">
            
                <a href="../验证人/验证器常见的问题.html">
            
                    
                    验证器常见的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../验证人/验证器的安全.html">
            
                <a href="../验证人/验证器的安全.html">
            
                    
                    验证器的安全
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../委托人/README.md">
            
                <span>
            
                    
                    委托人
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../委托人/委托人操作指南.html">
            
                <a href="../委托人/委托人操作指南.html">
            
                    
                    委托人操作指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../委托人/委托人常见的问题.html">
            
                <a href="../委托人/委托人常见的问题.html">
            
                    
                    委托人常见的问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../治理/README.md">
            
                <span>
            
                    
                    治理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../治理/治理概述.html">
            
                <a href="../治理/治理概述.html">
            
                    
                    治理概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../治理/治理操作指南.html">
            
                <a href="../治理/治理操作指南.html">
            
                    
                    治理操作指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../治理/可治理参数索引.html">
            
                <a href="../治理/可治理参数索引.html">
            
                    
                    可治理参数索引
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../合约教程/README.md">
            
                <span>
            
                    
                    合约教程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="../合约教程/合约快速上手.html">
            
                <a href="../合约教程/合约快速上手.html">
            
                    
                    合约快速上手
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="../合约教程/合约列表.html">
            
                <a href="../合约教程/合约列表.html">
            
                    
                    合约列表
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="README.md">
            
                <span>
            
                    
                    链上数据获取
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="链上接口.html">
            
                <a href="链上接口.html">
            
                    
                    链上接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="交易查询语法.html">
            
                <a href="交易查询语法.html">
            
                    
                    交易查询语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="events.html">
            
                <a href="events.html">
            
                    
                    events
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="8.1.4" data-path="grpc_rest.html">
            
                <a href="grpc_rest.html">
            
                    
                    grpc_rest
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >grpc_rest</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!--
order: 7
-->
<h1 id="grpc-rest-and-tendermint-endpoints">gRPC, REST, and Tendermint Endpoints</h1>
<p>This document presents an overview of all the endpoints a node exposes: gRPC, REST as well as some other endpoints. {synopsis}</p>
<h2 id="an-overview-of-all-endpoints">An Overview of All Endpoints</h2>
<p>Each node exposes the following endpoints for users to interact with a node, each endpoint is served on a different port. Details on how to configure each endpoint is provided in the endpoint&apos;s own section.</p>
<ul>
<li>the gRPC server (default port: <code>9090</code>),</li>
<li>the REST server (default port: <code>1317</code>),</li>
<li>the Tendermint RPC endpoint (default port: <code>26657</code>).</li>
</ul>
<p>::: tip
The node also exposes some other endpoints, such as the Tendermint P2P endpoint, or the <a href="https://docs.tendermint.com/master/nodes/metrics.html#metrics" target="_blank">Prometheus endpoint</a>, which are not directly related to the Cosmos SDK. Please refer to the <a href="https://docs.tendermint.com/master/tendermint-core/using-tendermint.html#configuration" target="_blank">Tendermint documentation</a> for more information about these endpoints.
:::</p>
<h2 id="grpc-server">gRPC Server</h2>
<p>::: warning
A patch introduced in <code>go-grpc v1.34.0</code> made gRPC incompatible with the <code>gogoproto</code> library, making some <a href="https://github.com/cosmos/cosmos-sdk/issues/8426" target="_blank">gRPC queries</a> panic. As such, the SDK requires that <code>go-grpc &lt;=v1.33.2</code> is installed in your <code>go.mod</code>.</p>
<p>To make sure that gRPC is working properly, it is <strong>highly recommended</strong> to add the following line in your application&apos;s <code>go.mod</code>:</p>
<pre><code>replace google.golang.org/grpc =&gt; google.golang.org/grpc v1.33.2
</code></pre><p>Please see <a href="https://github.com/cosmos/cosmos-sdk/issues/8392" target="_blank">issue #8392</a> for more info.
:::</p>
<p>Cosmos SDK v0.40 introduced Protobuf as the main <a href="encoding">encoding</a> library, and this brings a wide range of Protobuf-based tools that can be plugged into the SDK. One such tool is <a href="https://grpc.io" target="_blank">gRPC</a>, a modern open source high performance RPC framework that has decent client support in several languages.</p>
<p>Each module exposes a <a href="../building-modules/messages-and-queries.md#queries">Protobuf <code>Query</code> service</a> that defines state queries. The <code>Query</code> services and a transaction service used to broadcast transactions are hooked up to the gRPC server via the following function inside the application:</p>
<p>+++ <a href="https://github.com/cosmos/cosmos-sdk/blob/v0.43.0-rc0/server/types/app.go#L39-L41" target="_blank">https://github.com/cosmos/cosmos-sdk/blob/v0.43.0-rc0/server/types/app.go#L39-L41</a></p>
<p>Note: It is not possible to expose any <a href="../building-modules/messages-and-queries.md#messages">Protobuf <code>Msg</code> service</a> endpoints via gRPC. Transactions must be generated and signed using the CLI or programatically before they can be broadcasted using gRPC. See <a href="../run-node/txs.html">Generating, Signing, and Broadcasting Transactions</a> for more information.</p>
<p>The <code>grpc.Server</code> is a concrete gRPC server, which spawns and serves all gRPC query requests and a broadcast transaction request. This server can be configured inside <code>~/.simapp/config/app.toml</code>:</p>
<ul>
<li><code>grpc.enable = true|false</code> field defines if the gRPC server should be enabled. Defaults to <code>true</code>.</li>
<li><code>grpc.address = {string}</code> field defines the address (really, the port, since the host should be kept at <code>0.0.0.0</code>) the server should bind to. Defaults to <code>0.0.0.0:9090</code>.</li>
</ul>
<p>:::tip
<code>~/.simapp</code> is the directory where the node&apos;s configuration and databases are stored. By default, it&apos;s set to <code>~/.{app_name}</code>.
:::</p>
<p>Once the gRPC server is started, you can send requests to it using a gRPC client. Some examples are given in our <a href="../run-node/interact-node.md#using-grpc">Interact with the Node</a> tutorial.</p>
<p>An overview of all available gRPC endpoints shipped with the Cosmos SDK is <a href="proto-docs.md">Protobuf documention</a>.</p>
<h2 id="rest-server">REST Server</h2>
<p>In Cosmos SDK v0.40, the node continues to serve a REST server. However, the existing routes present in version v0.39 and earlier are now marked as deprecated, and new routes have been added via gRPC-gateway.</p>
<p>All routes are configured under the following fields in <code>~/.simapp/config/app.toml</code>:</p>
<ul>
<li><code>api.enable = true|false</code> field defines if the REST server should be enabled. Defaults to <code>false</code>.</li>
<li><code>api.address = {string}</code> field defines the address (really, the port, since the host should be kept at <code>0.0.0.0</code>) the server should bind to. Defaults to <code>tcp://0.0.0.0:1317</code>.</li>
<li>some additional API configuration options are defined in <code>~/.simapp/config/app.toml</code>, along with comments, please refer to that file directly.</li>
</ul>
<h3 id="grpc-gateway-rest-routes">gRPC-gateway REST Routes</h3>
<p>If, for various reasons, you cannot use gRPC (for example, you are building a web application, and browsers don&apos;t support HTTP2 on which gRPC is built), then the SDK offers REST routes via gRPC-gateway.</p>
<p><a href="https://grpc-ecosystem.github.io/grpc-gateway/" target="_blank">gRPC-gateway</a> is a tool to expose gRPC endpoints as REST endpoints. For each gRPC endpoint defined in a Protobuf <code>Query</code> service, the SDK offers a REST equivalent. For instance, querying a balance could be done via the <code>/cosmos.bank.v1beta1.QueryAllBalances</code> gRPC endpoint, or alternatively via the gRPC-gateway <code>&quot;/cosmos/bank/v1beta1/balances/{address}&quot;</code> REST endpoint: both will return the same result. For each RPC method defined in a Protobuf <code>Query</code> service, the corresponding REST endpoint is defined as an option:</p>
<p>+++ <a href="https://github.com/cosmos/cosmos-sdk/blob/v0.41.0/proto/cosmos/bank/v1beta1/query.proto#L19-L22" target="_blank">https://github.com/cosmos/cosmos-sdk/blob/v0.41.0/proto/cosmos/bank/v1beta1/query.proto#L19-L22</a></p>
<p>For application developers, gRPC-gateway REST routes needs to be wired up to the REST server, this is done by calling the <code>RegisterGRPCGatewayRoutes</code> function on the ModuleManager.</p>
<h3 id="legacy-rest-api-routes">Legacy REST API Routes</h3>
<p>The REST routes present in Cosmos SDK v0.39 and earlier are marked as deprecated via a <a href="https://tools.ietf.org/id/draft-dalal-deprecation-header-01.html" target="_blank">HTTP deprecation header</a>. They are still maintained to keep backwards compatibility, but will be removed in v0.44. For updating from Legacy REST routes to new gRPC-gateway REST routes, please refer to our <a href="../migrations/rest.md">migration guide</a>.</p>
<p>For application developers, Legacy REST API routes needs to be wired up to the REST server, this is done by calling the <code>RegisterRESTRoutes</code> function on the ModuleManager.</p>
<h3 id="swagger">Swagger</h3>
<p>A <a href="https://swagger.io/" target="_blank">Swagger</a> (or OpenAPIv2) specification file is exposed under the <code>/swagger</code> route on the API server. Swagger is an open specification describing the API endpoints a server serves, including description, input arguments, return types and much more about each endpoint.</p>
<p>Enabling the <code>/swagger</code> endpoint is configurable inside <code>~/.simapp/config/app.toml</code> via the <code>api.swagger</code> field, which is set to true by default.</p>
<p>For application developers, you may want to generate your own Swagger definitions based on your custom modules. The SDK&apos;s <a href="https://github.com/cosmos/cosmos-sdk/blob/v0.40.0-rc4/scripts/protoc-swagger-gen.sh" target="_blank">Swagger generation script</a> is a good place to start.</p>
<h2 id="tendermint-rpc">Tendermint RPC</h2>
<p>Independently from the Cosmos SDK, Tendermint also exposes a RPC server. This RPC server can be configured by tuning parameters under the <code>rpc</code> table in the <code>~/.simapp/config/config.toml</code>, the default listening address is <code>tcp://0.0.0.0:26657</code>. An OpenAPI specification of all Tendermint RPC endpoints is available <a href="https://docs.tendermint.com/master/rpc/" target="_blank">here</a>.</p>
<p>Some Tendermint RPC endpoints are directly related to the Cosmos SDK:</p>
<ul>
<li><code>/abci_query</code>: this endpoint will query the application for state. As the <code>path</code> parameter, you can send the following strings:<ul>
<li>any Protobuf fully-qualified service method, such as <code>/cosmos.bank.v1beta1.QueryAllBalances</code>. The <code>data</code> field should then include the method&apos;s request parameter(s) encoded as bytes using Protobuf.</li>
<li><code>/app/simulate</code>: this will simulate a transaction, and return some information such as gas used.</li>
<li><code>/app/version</code>: this will return the application&apos;s version.</li>
<li><code>/store/{path}</code>: this will query the store directly.</li>
<li><code>/p2p/filter/addr/{port}</code>: this will return a filtered list of the node&apos;s P2P peers by address port.</li>
<li><code>/p2p/filter/id/{id}</code>: this will return a filtered list of the node&apos;s P2P peers by ID.</li>
</ul>
</li>
<li><code>/broadcast_tx_{aync,async,commit}</code>: these 3 endpoint will broadcast a transaction to other peers. CLI, gRPC and REST expose <a href="transactions.md#broadcasting-the-transaction">a way to broadcast transations</a>, but they all use these 3 Tendermint RPCs under the hood.</li>
</ul>
<h2 id="comparison-table">Comparison Table</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Advantages</th>
<th>Disadvantages</th>
</tr>
</thead>
<tbody>
<tr>
<td>gRPC</td>
<td>- can use code-generated stubs in various languages<br>- supports streaming and bidirectional communication (HTTP2)<br>- small wire binary sizes, faster transmission</td>
<td>- based on HTTP2, not available in browsers<br>- learning curve (mostly due to Protobuf)</td>
</tr>
<tr>
<td>REST</td>
<td>- ubiquitous<br>- client libraries in all languages, faster implementation<br></td>
<td>- only supports unary request-response communication (HTTP1.1)<br>- bigger over-the-wire message sizes (JSON)</td>
</tr>
<tr>
<td>Tendermint RPC</td>
<td>- easy to use</td>
<td>- bigger over-the-wire message sizes (JSON)</td>
</tr>
</tbody>
</table>
<h2 id="next-hide">Next {hide}</h2>
<p>Learn about <a href="cli.md">the CLI</a> {hide}</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="events.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: events">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"grpc_rest","level":"8.1.4","depth":2,"previous":{"title":"events","level":"8.1.3","depth":2,"path":"链上数据获取/events.md","ref":"./链上数据获取/events.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"链上数据获取/grpc_rest.md","mtime":"2022-06-17T05:47:37.586Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-07-12T02:37:25.922Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

