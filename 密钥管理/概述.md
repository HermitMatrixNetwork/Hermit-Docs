# 概述

## **加密协议/密钥管理**

为了让 Hermit Network 使用加密数据作为输入、输出和状态，它需要强大的加密和密钥派生逻辑。Hermit Network 使用了几种密钥派生和加密技术：

- [HKDF -SHA256](https://datatracker.ietf.org/doc/html/rfc5869#section-2)函数用于确定性密钥推导；
- [ECDH](https://en.wikipedia.org/wiki/Elliptic-curve_Diffie–Hellman)（x25519）函数用于生成公钥/私钥对；和
- [AES -128-SIV](https://tools.ietf.org/html/rfc5297)对称加密方案。

### 对称和非对称加密

上述对称和非对称加密方法的组合用于为去中心化网络的引导、新 SGX 节点的添加以及输入、输出和状态的加密创建一个安全的过程。所有私钥和公钥的管理只能在特定条件下共享，其他人永远不会离开 SGX 实例以确保私有数据处理。

### 共识种子

网络使用称为“共识种子”的随机数作为参数来派生网络用于加密目的的公钥和私钥集。共识种子对生态系统中的任何一方都是未知的，并且是由网络本身在网络起源时创建的。对于确定性密钥生成，网络使用已知的“盐”，该盐被选为比特币减半块的哈希值。

### 交易加密

由于交易是由网络用户发起的，他们使用自己的私钥和网络生成的公钥派生 IKM（输入密钥材料），网络使用用户的公钥和网络生成的私钥派生相同的 IKM . 然后在 TEE 中从 IKM、salt 和使用共识种子生成的随机数导出交易的加密密钥。加密密钥用于加密特定于此交易的输入。只有协议和签署交易的用户才能访问加密密钥，因此可以访问与此特定智能合约计算相关的输入、输出和状态。